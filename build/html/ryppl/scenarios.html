<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Development scenarios &mdash; Gitting boost</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Gitting boost" href="../index.html" />
    <link rel="up" title="Ryppl: a prototype" href="index.html" />
    <link rel="next" title="How this was all set up" href="../about_the_mirror.html" />
    <link rel="prev" title="Getting started" href="gettingstarted.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../about_the_mirror.html" title="How this was all set up"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="gettingstarted.html" title="Getting started"
             accesskey="P">previous</a> |</li>
    <li><a href="http://www.boost.org/">Boost</a> &raquo;</li>
    
        <li><a href="../index.html">Gitting boost</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">Ryppl: a prototype</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/alt.boost.png" alt="Logo"/>
            </a></p>
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Development scenarios</a><ul>
<li><a class="reference external" href="#modularize-an-existing-boost-project">&#8220;Modularize&#8221; an existing boost project</a><ul>
<li><a class="reference external" href="#import-project-into-local-repository">Import project into local repository</a></li>
<li><a class="reference external" href="#push">Push</a></li>
<li><a class="reference external" href="#clean-the-superproject">Clean the superproject</a></li>
<li><a class="reference external" href="#add-the-submodule">Add the submodule</a></li>
<li><a class="reference external" href="#recap">Recap</a></li>
</ul>
</li>
<li><a class="reference external" href="#start-my-own-development-branch-of-a-library">Start my own development branch of a library</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="gettingstarted.html"
                                  title="previous chapter">Getting started</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../about_the_mirror.html"
                                  title="next chapter">How this was all set up</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/ryppl/scenarios.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="development-scenarios">
<h1>Development scenarios<a class="headerlink" href="#development-scenarios" title="Permalink to this headline">¶</a></h1>
<p>Now we&#8217;ll walk through several development scenarios and have a look
at the workflow.</p>
<div class="section" id="modularize-an-existing-boost-project">
<span id="modularize-python"></span><h2>&#8220;Modularize&#8221; an existing boost project<a class="headerlink" href="#modularize-an-existing-boost-project" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s &#8220;modularize&#8221; boost.python.  I check out <tt class="docutils literal"><span class="pre">ryppl</span></tt>, which
currently hosts boost.python directly, not as a submodule (though by
the time you read this, python will be a submodule, so try out this
modularization on something else).</p>
<p>I&#8217;m in my fresh clone (without having done any <tt class="docutils literal"><span class="pre">git</span> <span class="pre">submodule</span> <span class="pre">init</span></tt>
or any of that..  you may, but it isn&#8217;t necessary.)</p>
<div class="section" id="import-project-into-local-repository">
<h3>Import project into local repository<a class="headerlink" href="#import-project-into-local-repository" title="Permalink to this headline">¶</a></h3>
<p>I cd into the python subdirectory and import its contents into a local
git repository:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="go">%</span><span class="g-Whitespace"> </span><span class="go">cd</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">init</span>
<span class="go">Initialized</span><span class="g-Whitespace"> </span><span class="go">empty</span><span class="g-Whitespace"> </span><span class="go">Git</span><span class="g-Whitespace"> </span><span class="go">repository</span><span class="g-Whitespace"> </span><span class="go">in</span><span class="g-Whitespace"> </span><span class="go">/tmp/src/libs/python/.git/</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">add </span>.<span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">commit </span><span class="o">-m </span><span class="s2">&quot;modularizing python&quot;</span><span class="g-Whitespace"></span>
<span class="go">[master</span><span class="g-Whitespace"> </span><span class="go">(root-commit)</span><span class="g-Whitespace"> </span><span class="go">c16bad0]</span><span class="g-Whitespace"> </span><span class="go">modularizing</span><span class="g-Whitespace"> </span><span class="go">python</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">680</span><span class="g-Whitespace"> </span><span class="go">files</span><span class="g-Whitespace"> </span><span class="go">changed,</span><span class="g-Whitespace"> </span><span class="go">79509</span><span class="g-Whitespace"> </span><span class="go">insertions(+),</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">deletions(-)</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">CMakeLists.txt</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">build/Jamfile.v2</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">doc/Jamfile</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">[etc]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">todo.txt</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>You&#8217;ll notice I&#8217;ve created a new git repository inside a git
repository... this kind of thing would confuse svn, but here it
doesn&#8217;t matter; unlike subversion, git information exists only at the
root of each clone (in subversion <tt class="docutils literal"><span class="pre">.svn</span></tt> directories are sprinkled
through the entire checkout).</p>
</div>
<div class="section" id="push">
<h3>Push<a class="headerlink" href="#push" title="Permalink to this headline">¶</a></h3>
<p>Meanwhile I&#8217;ve created a repository to hold this project up on
gitorious.  I now push the code there:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">push </span><span class="ow">git@gitorious.org:ryppl/python.git</span><span class="g-Whitespace">  </span><span class="gp">&lt;-- &#39;git@&#39; is push url</span><span class="g-Whitespace"></span>
<span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">714,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Delta</span><span class="g-Whitespace"> </span><span class="go">compression</span><span class="g-Whitespace"> </span><span class="go">using</span><span class="g-Whitespace"> </span><span class="go">up</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">8</span><span class="g-Whitespace"> </span><span class="go">threads.</span><span class="g-Whitespace"></span>
<span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(708/708),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Writing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(714/714),</span><span class="g-Whitespace"> </span><span class="go">825.03</span><span class="g-Whitespace"> </span><span class="go">KiB,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">714</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">127),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">0)</span><span class="g-Whitespace"></span>
<span class="go">=&gt;</span><span class="g-Whitespace"> </span><span class="go">Syncing</span><span class="g-Whitespace"> </span><span class="go">Gitorious...</span><span class="g-Whitespace"> </span><span class="go">[OK]</span><span class="g-Whitespace"></span>
<span class="go">To</span><span class="g-Whitespace"> </span><span class="ow">git@gitorious.org:ryppl/python.git</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">+</span><span class="g-Whitespace"> </span><span class="mh">1b112bc...c16bad0</span><span class="g-Whitespace"> </span><span class="go">HEAD</span><span class="g-Whitespace"> </span><span class="go">-&gt;</span><span class="g-Whitespace"> </span><span class="go">master</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>I&#8217;ve used the <em>push</em> url, since I have write access.</p>
</div>
<div class="section" id="clean-the-superproject">
<h3>Clean the superproject<a class="headerlink" href="#clean-the-superproject" title="Permalink to this headline">¶</a></h3>
<p>Now that I have python&#8217;s code safely pushed to a separate
publicly-visible repository, I can remove the python code from the
superproject.  I want to remove the directory <tt class="docutils literal"><span class="pre">libs/python</span></tt>
entirely, as git will create <tt class="docutils literal"><span class="pre">libs/python</span></tt> itself when I add the
submodule:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>cd ..               <span class="gp">&lt;-- move to directory libs/</span><span class="g-Whitespace"></span>

<span class="k">% </span>rm -r python        <span class="gp">&lt;-- adios</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span>rm<span class="g-Whitespace"> </span><span class="o">-r </span>python<span class="g-Whitespace">    </span><span class="gp">&lt;-- stage the &#39;rm&#39; for commit</span><span class="g-Whitespace"></span>
<span class="go">rm</span><span class="g-Whitespace"> </span><span class="s1">&#39;libs/python/CMakeLists.txt&#39;</span><span class="g-Whitespace"></span>
<span class="go">rm</span><span class="g-Whitespace"> </span><span class="s1">&#39;libs/python/build/Jamfile.v2&#39;</span><span class="g-Whitespace"></span>
<span class="go">rm</span><span class="g-Whitespace"> </span><span class="s1">&#39;libs/python/doc/Jamfile&#39;</span><span class="g-Whitespace"></span>
<span class="go">...</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">commit </span><span class="o">-m </span><span class="s2">&quot;bye bye python&quot;</span><span class="g-Whitespace"></span>
<span class="go">[master</span><span class="g-Whitespace"> </span><span class="go">2efae00]</span><span class="g-Whitespace"> </span><span class="go">bye</span><span class="g-Whitespace"> </span><span class="go">bye</span><span class="g-Whitespace"> </span><span class="go">python</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">680</span><span class="g-Whitespace"> </span><span class="go">files</span><span class="g-Whitespace"> </span><span class="go">changed,</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">insertions(+),</span><span class="g-Whitespace"> </span><span class="go">79509</span><span class="g-Whitespace"> </span><span class="go">deletions(-)</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">delete</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">libs/python/CMakeLists.txt</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">...</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">delete</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">libs/python/todo.txt</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>For sanity let&#8217;s verify that the working copy is clean:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="c"># On branch master</span>
<span class="go">nothing</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">commit</span><span class="g-Whitespace"> </span><span class="go">(working</span><span class="g-Whitespace"> </span><span class="go">directory</span><span class="g-Whitespace"> </span><span class="go">clean)</span><span class="g-Whitespace"></span>
</pre></div>
</div>
</div>
<div class="section" id="add-the-submodule">
<h3>Add the submodule<a class="headerlink" href="#add-the-submodule" title="Permalink to this headline">¶</a></h3>
<p>Now add the git submodule to the superproject:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">submodule add </span><span class="ow">git://gitorious.org/ryppl/python.git</span><span class="g-Whitespace"> </span>libs/python<span class="g-Whitespace"> </span><span class="gp">&lt;-- git://, not git@</span><span class="g-Whitespace"></span>
<span class="go">Initialized</span><span class="g-Whitespace"> </span><span class="go">empty</span><span class="g-Whitespace"> </span><span class="go">Git</span><span class="g-Whitespace"> </span><span class="go">repository</span><span class="g-Whitespace"> </span><span class="go">in</span><span class="g-Whitespace"> </span><span class="go">/tmp/src/libs/python/.git/</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">714,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(581/581),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">714</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">127),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">714</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">127)</span><span class="g-Whitespace"></span>
<span class="go">Receiving</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(714/714),</span><span class="g-Whitespace"> </span><span class="go">825.03</span><span class="g-Whitespace"> </span><span class="go">KiB</span><span class="g-Whitespace"> </span><span class="go">|</span><span class="g-Whitespace"> </span><span class="go">674</span><span class="g-Whitespace"> </span><span class="go">KiB/s,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Resolving</span><span class="g-Whitespace"> </span><span class="go">deltas:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(127/127),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Notice I have used the <tt class="docutils literal"><span class="pre">git://</span></tt> url, not the <tt class="docutils literal"><span class="pre">git&#64;</span></tt> url.
The <tt class="docutils literal"><span class="pre">git://</span></tt> url is readonly and is the only type of URL
that should be committed to the superproject.  The <tt class="docutils literal"><span class="pre">git&#64;</span></tt>
urls are readwrite and authenticated via SSH.  I will soon
use the latter to push commits from submodules, but I never
commit them to superprojects.</p>
</div>
<p>Git has checked out the submodule for us.  If I check the status of
the superproject, I&#8217;ll see:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="c"># On branch master</span>
<span class="c"># Your branch is ahead of &#39;origin/master&#39; by 1 commit.</span>
<span class="c">#</span>
<span class="c"># Changes to be committed:</span>
<span class="c">#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span>
<span class="c">#</span>
<span class="c">#       modified:   .gitmodules</span>
<span class="c">#       new file:   libs/python</span>
<span class="c">#</span>
</pre></div>
</div>
<p>And &#8216;git diff &#8211;cached&#8217; shows me:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">diff </span>--cached<span class="g-Whitespace"></span>
<span class="go">diff</span><span class="g-Whitespace"> </span><span class="go">--git</span><span class="g-Whitespace"> </span><span class="go">a/.gitmodules</span><span class="g-Whitespace"> </span><span class="go">b/.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">index</span><span class="g-Whitespace"> </span><span class="mh">a74cbf4..f6067c4</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"></span>
<span class="go">---</span><span class="g-Whitespace"> </span><span class="go">a/.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">+++</span><span class="g-Whitespace"> </span><span class="go">b/.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">@@</span><span class="g-Whitespace"> </span><span class="go">-10,3</span><span class="g-Whitespace"> </span><span class="go">+10,6</span><span class="g-Whitespace"> </span><span class="go">@@</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="s2">&quot;libs/fiber&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ripple/fiber.git</span><span class="g-Whitespace"></span>
<span class="go">+[submodule</span><span class="g-Whitespace"> </span><span class="s2">&quot;libs/python&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="go">+</span><span class="g-Whitespace">       </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="go">+</span><span class="g-Whitespace">       </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/python.git</span><span class="g-Whitespace"></span>
<span class="go">diff</span><span class="g-Whitespace"> </span><span class="go">--git</span><span class="g-Whitespace"> </span><span class="go">a/libs/python</span><span class="g-Whitespace"> </span><span class="go">b/libs/python</span><span class="g-Whitespace"></span>
<span class="go">new</span><span class="g-Whitespace"> </span><span class="go">file</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">160000</span><span class="g-Whitespace">                  </span><span class="gp">&lt;-- funny-looking mode</span>
<span class="go">index</span><span class="g-Whitespace"> </span><span class="mh">0000000..c16bad0</span><span class="g-Whitespace"></span>
<span class="go">---</span><span class="g-Whitespace"> </span><span class="go">/dev/null</span><span class="g-Whitespace"></span>
<span class="go">+++</span><span class="g-Whitespace"> </span><span class="go">b/libs/python</span><span class="g-Whitespace"></span>
<span class="go">@@</span><span class="g-Whitespace"> </span><span class="go">-0,0</span><span class="g-Whitespace"> </span><span class="go">+1</span><span class="g-Whitespace"> </span><span class="go">@@</span><span class="g-Whitespace"></span>
<span class="go">+Subproject</span><span class="g-Whitespace"> </span><span class="go">commit</span><span class="g-Whitespace"> </span><span class="mh">c16bad0e3f847375872e53bac319d2f724fbf569</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Here we see a few lines added to .gitmodules as well as <em>new file mode
160000</em>...  this is a special mode that indicates you&#8217;re committing as
a directory entry, not a file.  This is just how git does its
submodule bookkeeping.  The hash there records the commit at which the
submodule will be checked out.  This is the same special file that we
see in the line <em>new file: libs/python</em> of <tt class="docutils literal"><span class="pre">git</span> <span class="pre">status</span></tt>.  The hash
is the same one that we see in the current output of <tt class="docutils literal"><span class="pre">git</span> <span class="pre">submodule</span>
<span class="pre">status</span></tt>:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">submodule status</span>
<span class="go">-</span><span class="mh">6d205b973e41c226eba838ef125d5a14f508e173</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"></span>
<span class="go">-</span><span class="mh">413d393f7aaea99c85d8db7bd93e06b99465e84c</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="go">-</span><span class="mh">d0698203f19bf30518f58ce8058dca496dba8ecf</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"></span>
<span class="go">-</span><span class="mh">c16bad0e3f847375872e53bac319d2f724fbf569</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="go">-</span><span class="mh">f1e2aa9ad7743beaf11296e4f7d6f960814a86b7</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>To finish up let&#8217;s commit (and push):</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">commit </span><span class="o">-m </span><span class="s2">&quot;modularized python&quot;</span><span class="g-Whitespace"></span>
<span class="go">[master</span><span class="g-Whitespace"> </span><span class="go">525e3b0]</span><span class="g-Whitespace"> </span><span class="go">modularized</span><span class="g-Whitespace"> </span><span class="go">python</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">2</span><span class="g-Whitespace"> </span><span class="go">files</span><span class="g-Whitespace"> </span><span class="go">changed,</span><span class="g-Whitespace"> </span><span class="go">4</span><span class="g-Whitespace"> </span><span class="go">insertions(+),</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">deletions(-)</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">160000</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
</pre></div>
</div>
</div>
<div class="section" id="recap">
<h3>Recap<a class="headerlink" href="#recap" title="Permalink to this headline">¶</a></h3>
<p>To modularize project <strong>P</strong> I have:</p>
<ul class="simple">
<li>Created a publicly-visible repository <strong>PR</strong> to hold the project I&#8217;m
modularizing</li>
<li>Imported <strong>P</strong> into a single git repo and pushed the results to
<strong>PR</strong>.</li>
<li>Deleted all trace of <strong>P</strong> from the superproject and committed
the deletion.</li>
<li>Added <strong>PR</strong> as a submodule to the superproject with directory
<tt class="docutils literal"><span class="pre">libs/</span></tt><strong>P</strong>.</li>
<li>Committed the addition to the superproject and pushed the results.</li>
</ul>
<p>Now, looking at my submodule status:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">submodule status</span>
<span class="go">-</span><span class="mh">6d205b973e41c226eba838ef125d5a14f508e173</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"></span>
<span class="go">-</span><span class="mh">413d393f7aaea99c85d8db7bd93e06b99465e84c</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="go">-</span><span class="mh">d0698203f19bf30518f58ce8058dca496dba8ecf</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"></span>
<span class="go">-</span><span class="mh">c16bad0e3f847375872e53bac319d2f724fbf569</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="go">-</span><span class="mh">f1e2aa9ad7743beaf11296e4f7d6f960814a86b7</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>I see the same thing as I did on initial checkout, with the addition
of one extra submodule (in this case python).  I get the workspace
ready for build with the same steps in first part of
<a class="reference external" href="gettingstarted.html#getting-started"><em>Getting started</em></a>:</p>
<ul class="simple">
<li>git submodule init</li>
<li>git submodule update</li>
<li>run cmake</li>
<li>make genheaders</li>
<li>???</li>
<li>profit</li>
</ul>
</div>
</div>
<div class="section" id="start-my-own-development-branch-of-a-library">
<h2>Start my own development branch of a library<a class="headerlink" href="#start-my-own-development-branch-of-a-library" title="Permalink to this headline">¶</a></h2>
<p>In <a class="reference internal" href="#modularize-python"><em>&#8220;Modularize&#8221; an existing boost project</em></a> we modularized library <tt class="docutils literal"><span class="pre">boost.python</span></tt>.</p>
<p>Say I have a lot of modifications to <tt class="docutils literal"><span class="pre">boost.python</span></tt> that I&#8217;ve been
working on.  Some of my clients are using my modifications, but
they&#8217;re not yet in upstream boost, if they&#8217;ll ever be.  I&#8217;m forced to
make in-house releases of boost-plus-my-new-python-features.  At the
same time, I want my code to be maximally available to the boost
community, as I hope to have my changes taken upstream, which would
both make a contribution to boost and simplify my job.</p>
<p>I&#8217;m going to need a public repository for my modifications to python.
On gitorious, I find the python repository at
<tt class="docutils literal"><span class="pre">http://www.gitorious.org/ryppl/python</span></tt>.</p>
<p>I&#8217;m logged in to gitorious, and have uploaded ssh keys as described in
<a class="reference external" href="../setup.html#sshkeys"><em>Register and make a clone on gitorious</em></a>.  I click &#8220;clone this repository on gitorius&#8221; and am
taken to a page that says &#8220;Create a clone of <em>python</em> in <em>ryppl</em>&#8220;.
I&#8217;ve chosen the default name, <em>straszheims-python</em>.</p>
<p>Back on my machine, I have a working clone of <strong>ryppl</strong> itself checked
out.  I&#8217;ve done the submodule <tt class="docutils literal"><span class="pre">init</span></tt> and <tt class="docutils literal"><span class="pre">update</span></tt>.  My submodules
are:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="go">%</span><span class="g-Whitespace"> </span><span class="go">cat</span><span class="g-Whitespace"> </span><span class="go">.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="s2">&quot;libs/wave&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/wave.git</span><span class="g-Whitespace"></span>
<span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="s2">&quot;libs/chrono&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/chrono.git</span><span class="g-Whitespace"></span>
<span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="s2">&quot;libs/process&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/process.git</span><span class="g-Whitespace"></span>
<span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="s2">&quot;libs/fiber&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/fiber.git</span><span class="g-Whitespace"></span>
<span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="s2">&quot;libs/python&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/python.git</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>To change the url, I modify this file with a text editor, changing the
<tt class="docutils literal"><span class="pre">python</span></tt> url to point to <tt class="docutils literal"><span class="pre">straszheims-python</span></tt>:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="go">%</span><span class="g-Whitespace"> </span><span class="go">cat</span><span class="g-Whitespace"> </span><span class="go">.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">...</span><span class="g-Whitespace"></span>
<span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="s2">&quot;libs/python&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/straszheims-python.git</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>And issue <tt class="docutils literal"><span class="pre">git</span> <span class="pre">submodule</span> <span class="pre">sync</span></tt>:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">submodule </span>sync<span class="g-Whitespace"></span>
<span class="go">Synchronizing</span><span class="g-Whitespace"> </span><span class="go">submodule</span><span class="g-Whitespace"> </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">for</span><span class="g-Whitespace"> </span><span class="s1">&#39;libs/chrono&#39;</span><span class="g-Whitespace"></span>
<span class="go">Synchronizing</span><span class="g-Whitespace"> </span><span class="go">submodule</span><span class="g-Whitespace"> </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">for</span><span class="g-Whitespace"> </span><span class="s1">&#39;libs/fiber&#39;</span><span class="g-Whitespace"></span>
<span class="go">Synchronizing</span><span class="g-Whitespace"> </span><span class="go">submodule</span><span class="g-Whitespace"> </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">for</span><span class="g-Whitespace"> </span><span class="s1">&#39;libs/process&#39;</span><span class="g-Whitespace"></span>
<span class="go">Synchronizing</span><span class="g-Whitespace"> </span><span class="go">submodule</span><span class="g-Whitespace"> </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">for</span><span class="g-Whitespace"> </span><span class="s1">&#39;libs/python&#39;</span><span class="g-Whitespace"></span>
<span class="go">Synchronizing</span><span class="g-Whitespace"> </span><span class="go">submodule</span><span class="g-Whitespace"> </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">for</span><span class="g-Whitespace"> </span><span class="s1">&#39;libs/wave&#39;</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Which will synchronize the submodules&#8217; git repos.  I can see that the
origin of the python project is now my clone by catting the
<tt class="docutils literal"><span class="pre">.git/config</span></tt> file of the submodule:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="go">%</span><span class="g-Whitespace"> </span><span class="go">cat</span><span class="g-Whitespace"> </span><span class="go">libs/python/.git/config</span><span class="g-Whitespace"></span>
<span class="go">[core]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">repositoryformatversion</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">filemode</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">true</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">bare</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">false</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">logallrefupdates</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">true</span><span class="g-Whitespace"></span>
<span class="go">[remote</span><span class="g-Whitespace"> </span><span class="s2">&quot;origin&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">fetch</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">+refs/heads/*:refs/remotes/origin/*</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/straszheims-python.git</span><span class="g-Whitespace">   </span><span class="gp">&lt;-- mine</span>
<span class="go">[branch</span><span class="g-Whitespace"> </span><span class="s2">&quot;master&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">remote</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">origin</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">merge</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">refs/heads/master</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>The next goal is to commit to the python submodule and make these
commits available.  Moving into the subproject&#8217;s directory, I see:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>cd libs/python   <span class="gp">&lt;-- I&#39;m in subproject dir</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="c"># Not currently on any branch.   &lt;-- hmm</span>
<span class="go">nothing</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">commit</span><span class="g-Whitespace"> </span><span class="go">(working</span><span class="g-Whitespace"> </span><span class="go">directory</span><span class="g-Whitespace"> </span><span class="go">clean)</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>I need to be on a branch locally to commit anything.  I&#8217;ll work on the
standard &#8216;master&#8217; branch.  First I need to check it out:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">checkout </span>master<span class="g-Whitespace"></span>
<span class="go">Switched</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">branch</span><span class="g-Whitespace"> </span><span class="s1">&#39;master&#39;</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="c"># On branch master</span>
<span class="go">nothing</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">commit</span><span class="g-Whitespace"> </span><span class="go">(working</span><span class="g-Whitespace"> </span><span class="go">directory</span><span class="g-Whitespace"> </span><span class="go">clean)</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Now I make my modifications in <tt class="docutils literal"><span class="pre">libs/python</span></tt>, check them in, and
push them, again in the subproject&#8217;s directory:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>emacs             <span class="gp">&lt;-- make a bunch of changes..</span><span class="g-Whitespace"></span>
<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">commit </span><span class="o">-m </span><span class="s2">&quot;Tons of stuff... this is my boost.python version 3 branch.&quot;</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>And to make these changes public, I need to push them.  There&#8217;s a
catch: the git URL that the python project was checked out from is
readonly.  To push, I add a remote called &#8216;writable&#8217; that refers to
the same place (but the readwrite URL) and push there:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">remote add </span>writable<span class="g-Whitespace"> </span><span class="ow">git@gitorious.org:ryppl/straszheims-python.git</span><span class="g-Whitespace"></span>
<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">push </span>writable<span class="g-Whitespace"></span>
<span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">371,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Delta</span><span class="g-Whitespace"> </span><span class="go">compression</span><span class="g-Whitespace"> </span><span class="go">using</span><span class="g-Whitespace"> </span><span class="go">up</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">8</span><span class="g-Whitespace"> </span><span class="go">threads.</span><span class="g-Whitespace"></span>
<span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(219/219),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Writing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(223/223),</span><span class="g-Whitespace"> </span><span class="go">69.23</span><span class="g-Whitespace"> </span><span class="go">KiB,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">223</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">155),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">0)</span><span class="g-Whitespace"></span>
<span class="go">=&gt;</span><span class="g-Whitespace"> </span><span class="go">Syncing</span><span class="g-Whitespace"> </span><span class="go">Gitorious...</span><span class="g-Whitespace"> </span><span class="go">[OK]</span><span class="g-Whitespace"></span>
<span class="go">To</span><span class="g-Whitespace"> </span><span class="ow">git@gitorious.org:ryppl/straszheims-python.git</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">   </span><span class="mh">c16bad0..d57dd22</span><span class="g-Whitespace">  </span><span class="go">HEAD</span><span class="g-Whitespace"> </span><span class="go">-&gt;</span><span class="g-Whitespace"> </span><span class="go">master</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Moving back up to the superproject directory, <tt class="docutils literal"><span class="pre">git</span> <span class="pre">submodule</span></tt> shows
me that I&#8217;ve made a commit in various ways:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">submodule status</span>
<span class="g-Whitespace"> </span><span class="mh">6d205b973e41c226eba838ef125d5a14f508e173</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"> </span><span class="go">(heads/master)</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="mh">413d393f7aaea99c85d8db7bd93e06b99465e84c</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"> </span><span class="go">(heads/master)</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="mh">d0698203f19bf30518f58ce8058dca496dba8ecf</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"> </span><span class="go">(heads/master)</span><span class="g-Whitespace"></span>
<span class="go">+</span><span class="mh">d57dd2233e855b4dfb440c909df303c34f24d797</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"> </span><span class="go">(heads/master)</span><span class="g-Whitespace">  </span><span class="gp">&lt;-- note the plus</span>
<span class="g-Whitespace"> </span><span class="mh">f1e2aa9ad7743beaf11296e4f7d6f960814a86b7</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"> </span><span class="go">(heads/master)</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">submodule summary</span>
<span class="go">*</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"> </span><span class="mh">c16bad0...d57dd22</span><span class="g-Whitespace"> </span><span class="go">(1):</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">  </span><span class="go">&gt;</span><span class="g-Whitespace"> </span><span class="go">Tons</span><span class="g-Whitespace"> </span><span class="go">of</span><span class="g-Whitespace"> </span><span class="go">stuff...</span><span class="g-Whitespace"> </span><span class="go">this</span><span class="g-Whitespace"> </span><span class="go">is</span><span class="g-Whitespace"> </span><span class="go">my</span><span class="g-Whitespace"> </span><span class="go">boost.python</span><span class="g-Whitespace"> </span><span class="go">version</span><span class="g-Whitespace"> </span><span class="go">3</span><span class="g-Whitespace"> </span><span class="go">branch.</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Regular git commands show me that things are modified as well.  <tt class="docutils literal"><span class="pre">Git</span>
<span class="pre">status</span></tt> for instance,:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="c"># On branch master</span>
<span class="c"># Changed but not updated:</span>
<span class="c">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span>
<span class="c">#   (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span>
<span class="c">#</span>
<span class="c">#       modified:   .gitmodules</span>
<span class="c">#       modified:   libs/python</span>
<span class="c">#</span>
</pre></div>
</div>
<p>And <tt class="docutils literal"><span class="pre">git</span> <span class="pre">diff</span></tt> gives me the full monty:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">diff</span>
<span class="go">diff</span><span class="g-Whitespace"> </span><span class="go">--git</span><span class="g-Whitespace"> </span><span class="go">a/.gitmodules</span><span class="g-Whitespace"> </span><span class="go">b/.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">index</span><span class="g-Whitespace"> </span><span class="mh">63fe174..9a9bf68</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"></span>
<span class="go">---</span><span class="g-Whitespace"> </span><span class="go">a/.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">+++</span><span class="g-Whitespace"> </span><span class="go">b/.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">@@</span><span class="g-Whitespace"> </span><span class="go">-12,4</span><span class="g-Whitespace"> </span><span class="go">+12,6</span><span class="g-Whitespace"> </span><span class="go">@@</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/fiber.git</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="s2">&quot;libs/python&quot;</span><span class="go">]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="go">-</span><span class="g-Whitespace">       </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/python.git</span><span class="g-Whitespace"></span>
<span class="go">+</span><span class="g-Whitespace">       </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="ow">git://gitorious.org/ryppl/straszheims-python.git</span><span class="g-Whitespace">   </span><span class="gp">&lt;-- changed url</span>
<span class="go">diff</span><span class="g-Whitespace"> </span><span class="go">--git</span><span class="g-Whitespace"> </span><span class="go">a/libs/python</span><span class="g-Whitespace"> </span><span class="go">b/libs/python</span><span class="g-Whitespace"></span>
<span class="go">index</span><span class="g-Whitespace"> </span><span class="mh">c16bad0..d57dd22</span><span class="g-Whitespace"> </span><span class="go">160000</span><span class="g-Whitespace"></span>
<span class="go">---</span><span class="g-Whitespace"> </span><span class="go">a/libs/python</span><span class="g-Whitespace"></span>
<span class="go">+++</span><span class="g-Whitespace"> </span><span class="go">b/libs/python</span><span class="g-Whitespace"></span>
<span class="go">@@</span><span class="g-Whitespace"> </span><span class="go">-1</span><span class="g-Whitespace"> </span><span class="go">+1</span><span class="g-Whitespace"> </span><span class="go">@@</span><span class="g-Whitespace"></span>
<span class="go">-Subproject</span><span class="g-Whitespace"> </span><span class="go">commit</span><span class="g-Whitespace"> </span><span class="mh">c16bad0e3f847375872e53bac319d2f724fbf569</span><span class="g-Whitespace"></span>
<span class="go">+Subproject</span><span class="g-Whitespace"> </span><span class="go">commit</span><span class="g-Whitespace"> </span><span class="mh">d57dd2233e855b4dfb440c909df303c34f24d797</span><span class="g-Whitespace">     </span><span class="gp">&lt;-- new commit</span>
</pre></div>
</div>
<p>I <tt class="docutils literal"><span class="pre">git</span> <span class="pre">add</span></tt> and commit:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">add </span>.gitmodules<span class="g-Whitespace"> </span>libs/python<span class="g-Whitespace"> </span><span class="gp">&lt;-- &#39;add&#39; stages changes for commit</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">commit </span><span class="o">-m </span><span class="s2">&quot;old hedgehog bones gutted from python and replaced with nutrient-rich chicken livers&quot;</span><span class="g-Whitespace"></span>
<span class="go">[master</span><span class="g-Whitespace"> </span><span class="go">bda6ca8]</span><span class="g-Whitespace"> </span><span class="go">old</span><span class="g-Whitespace"> </span><span class="go">hedgehog</span><span class="g-Whitespace"> </span><span class="go">bones</span><span class="g-Whitespace"> </span><span class="go">gutted</span><span class="g-Whitespace"> </span><span class="go">from</span><span class="g-Whitespace"> </span><span class="go">python</span><span class="g-Whitespace"> </span><span class="go">and</span><span class="g-Whitespace"> </span><span class="go">replaced</span><span class="g-Whitespace"> </span><span class="go">with</span><span class="g-Whitespace"> </span><span class="go">nutrient-rich</span><span class="g-Whitespace"> </span><span class="go">chicken</span><span class="g-Whitespace"> </span><span class="go">livers</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">2</span><span class="g-Whitespace"> </span><span class="go">files</span><span class="g-Whitespace"> </span><span class="go">changed,</span><span class="g-Whitespace"> </span><span class="go">4</span><span class="g-Whitespace"> </span><span class="go">insertions(+),</span><span class="g-Whitespace"> </span><span class="go">2</span><span class="g-Whitespace"> </span><span class="go">deletions(-)</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Now, this gets me part of the way there: I have:</p>
<ul class="simple">
<li>my own branch of python with my changes on it</li>
<li>local commits that update the superproject with my python goodies.</li>
</ul>
<p>Others can try out my changes by simply switching to my python branch,
as I did to start development on the branch.  To make my changes
available to others, I can push my changes (of the superproject) to a
clone of the superproject:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">push </span><span class="ow">git@gitorious.org:ryppl/straszheims-ryppl.git</span><span class="g-Whitespace"></span>
<span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">7,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Delta</span><span class="g-Whitespace"> </span><span class="go">compression</span><span class="g-Whitespace"> </span><span class="go">using</span><span class="g-Whitespace"> </span><span class="go">up</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">8</span><span class="g-Whitespace"> </span><span class="go">threads.</span><span class="g-Whitespace"></span>
<span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(4/4),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Writing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(4/4),</span><span class="g-Whitespace"> </span><span class="go">455</span><span class="g-Whitespace"> </span><span class="go">bytes,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">4</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">3),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">0)</span><span class="g-Whitespace"></span>
<span class="go">=&gt;</span><span class="g-Whitespace"> </span><span class="go">Syncing</span><span class="g-Whitespace"> </span><span class="go">Gitorious...</span><span class="g-Whitespace"> </span><span class="go">[OK]</span><span class="g-Whitespace"></span>
<span class="go">To</span><span class="g-Whitespace"> </span><span class="ow">git@gitorious.org:ryppl/straszheims-ryppl.git</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">   </span><span class="mh">eaa3aca..bda6ca8</span><span class="g-Whitespace">  </span><span class="go">HEAD</span><span class="g-Whitespace"> </span><span class="go">-&gt;</span><span class="g-Whitespace"> </span><span class="go">master</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Now, my working mixture of various versions of projects within and
outside of boost are available to anyone who has the git URL above.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../about_the_mirror.html" title="How this was all set up"
             >next</a> |</li>
        <li class="right" >
          <a href="gettingstarted.html" title="Getting started"
             >previous</a> |</li>
    <li><a href="http://www.boost.org/">Boost</a> &raquo;</li>
    
        <li><a href="../index.html">Gitting boost</a> &raquo;</li>

          <li><a href="index.html" >Ryppl: a prototype</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, troy d. straszheim --  Version 94a750f06c89e79e26c8af2c385103e506be8196, Sat, 28 Nov 2009.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>