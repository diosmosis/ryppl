<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Ryppl: a prototype &mdash; Gitting boost</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Gitting boost" href="index.html" />
    <link rel="next" title="How this was all set up" href="about_the_mirror.html" />
    <link rel="prev" title="Various HOWTOS" href="various_howtos.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="about_the_mirror.html" title="How this was all set up"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="various_howtos.html" title="Various HOWTOS"
             accesskey="P">previous</a> |</li>
    <li><a href="http://www.boost.org/">Boost</a> &raquo;</li>
    
        <li><a href="index.html">Gitting boost</a> &raquo;</li>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/alt.boost.png" alt="Logo"/>
            </a></p>
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Ryppl: a prototype</a><ul>
<li><a class="reference external" href="#getting-started">Getting started</a><ul>
<li><a class="reference external" href="#clone-the-superproject">Clone the superproject</a></li>
<li><a class="reference external" href="#initialize-and-update-the-submodules">Initialize and update the submodules</a></li>
<li><a class="reference external" href="#run-cmake-and-generate-forwarding-headers">Run cmake and generate forwarding headers</a></li>
<li><a class="reference external" href="#build">Build</a></li>
</ul>
</li>
<li><a class="reference external" href="#development-scenarios">Development scenarios</a><ul>
<li><a class="reference external" href="#modularize-an-existing-boost-project">&#8220;Modularize&#8221; an existing boost project</a><ul>
<li><a class="reference external" href="#create-a-repository-for-the-python-project">Create a repository for the python project</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#good-links">Good Links</a></li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="various_howtos.html"
                                  title="previous chapter">Various HOWTOS</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="about_the_mirror.html"
                                  title="next chapter">How this was all set up</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/ryppl.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="ryppl-a-prototype">
<h1>Ryppl: a prototype<a class="headerlink" href="#ryppl-a-prototype" title="Permalink to this headline">¶</a></h1>
<p>It&#8217;s <em>Ryppl</em> pronounced &#8220;ripple&#8221;.  Currently the <em>mainline</em> of ryppl
contains a reorganized boost.cmake 1.41.0.  The only released project
that has been separated from the main release is <strong>wave</strong>.  Three
sandbox projects have been added, as modules: <strong>chrono</strong>, <strong>process</strong>,
and <strong>fiber</strong>.</p>
<div class="section" id="getting-started">
<span id="id1"></span><h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="section" id="clone-the-superproject">
<h3>Clone the superproject<a class="headerlink" href="#clone-the-superproject" title="Permalink to this headline">¶</a></h3>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="go">git</span><span class="g-Whitespace"> </span><span class="go">clone</span><span class="g-Whitespace"> </span><span class="go">git://gitorious.org/ryppl/ryppl.git</span><span class="g-Whitespace"> </span><span class="go">src</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>This will clone the ryppl <em>superproject</em> down to directory <tt class="docutils literal"><span class="pre">src</span></tt>.
Have a look at the contents.  Most of boost is there, but:</p>
<ul>
<li><p class="first">There is no toplevel <tt class="docutils literal"><span class="pre">boost</span></tt> directory, where one normally finds
boosts&#8217; header files.</p>
</li>
<li><p class="first">There is a toplevel directory <tt class="docutils literal"><span class="pre">include</span></tt>... but it is empty.</p>
</li>
<li><p class="first">Under <tt class="docutils literal"><span class="pre">libs</span></tt>, there are empty subdirectories <tt class="docutils literal"><span class="pre">wave</span></tt>,
<tt class="docutils literal"><span class="pre">process</span></tt>, <tt class="docutils literal"><span class="pre">chrono</span></tt> and <tt class="docutils literal"><span class="pre">fiber</span></tt>.</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>ls -l libs/wave libs/chrono libs/process libs/fiber
<span class="go">libs/chrono:</span><span class="g-Whitespace"></span>
<span class="go">total</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"></span>

<span class="go">libs/fiber:</span><span class="g-Whitespace"></span>
<span class="go">total</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"></span>

<span class="go">libs/process:</span><span class="g-Whitespace"></span>
<span class="go">total</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"></span>

<span class="go">libs/wave:</span><span class="g-Whitespace"></span>
<span class="go">total</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"></span>
</pre></div>
</div>
</li>
<li><p class="first">Other than those four, each project (each one directory) under
<tt class="docutils literal"><span class="pre">libs/</span></tt> contains a directory <tt class="docutils literal"><span class="pre">include/boost</span></tt> inside which are
headers specific to this project, e.g. for <em>smart_ptr</em>:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>ls libs/smart_ptr/include/boost
<span class="go">enable_shared_from_this.hpp</span><span class="g-Whitespace"></span>
<span class="go">make_shared.hpp</span><span class="g-Whitespace"> </span><span class="go">scoped_array.hpp</span><span class="g-Whitespace"> </span><span class="go">scoped_ptr.hpp</span><span class="g-Whitespace"> </span><span class="go">shared_array.hpp</span><span class="g-Whitespace"></span>
<span class="go">shared_ptr.hpp</span><span class="g-Whitespace"> </span><span class="go">smart_ptr/</span><span class="g-Whitespace"> </span><span class="go">smart_ptr.hpp</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Note that headers are not required to have any particular layout</p>
</li>
<li><p class="first">In the toplevel there is a file <tt class="docutils literal"><span class="pre">.gitmodules</span></tt> that maps local
directories to remote git repositories:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="go">&quot;libs/wave&quot;]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">      </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">      </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">git://gitorious.org/ryppl/wave.git</span><span class="g-Whitespace"></span>
<span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="go">&quot;libs/chrono&quot;]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">      </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">      </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">git://gitorious.org/ryppl/chrono.git</span><span class="g-Whitespace"></span>
<span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="go">&quot;libs/process&quot;]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">      </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">      </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">git://gitorious.org/ryppl/process.git</span><span class="g-Whitespace"></span>
<span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="go">&quot;libs/fiber&quot;]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">      </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">      </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">git://gitorious.org/ryppl/fiber.git</span><span class="g-Whitespace"></span>
</pre></div>
</div>
</li>
<li><p class="first">The command <tt class="docutils literal"><span class="pre">git</span> <span class="pre">submodule</span> <span class="pre">status</span></tt> gives the commits at which each
submodule should be cloned:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span>submodule<span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="go">-6d205b973e41c226eba838ef125d5a14f508e173</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"></span>
<span class="go">-413d393f7aaea99c85d8db7bd93e06b99465e84c</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="go">-d0698203f19bf30518f58ce8058dca496dba8ecf</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"></span>
<span class="go">-f1e2aa9ad7743beaf11296e4f7d6f960814a86b7</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="initialize-and-update-the-submodules">
<h3>Initialize and update the submodules<a class="headerlink" href="#initialize-and-update-the-submodules" title="Permalink to this headline">¶</a></h3>
<p>Issue the command <tt class="docutils literal"><span class="pre">git</span> <span class="pre">submodule</span> <span class="pre">init</span></tt>:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span>submodule<span class="g-Whitespace"> </span><span class="gd">init</span>
<span class="go">Submodule</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/chrono&#39;</span><span class="g-Whitespace"> </span><span class="go">(git://gitorious.org/ryppl/chrono.git)</span><span class="g-Whitespace"> </span><span class="go">registered</span><span class="g-Whitespace"> </span><span class="go">for</span><span class="g-Whitespace"> </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/chrono&#39;</span><span class="g-Whitespace"></span>
<span class="go">Submodule</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/fiber&#39;</span><span class="g-Whitespace"> </span><span class="go">(git://gitorious.org/ryppl/fiber.git)</span><span class="g-Whitespace"> </span><span class="go">registered</span><span class="g-Whitespace"> </span><span class="go">for</span><span class="g-Whitespace"> </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/fiber&#39;</span><span class="g-Whitespace"></span>
<span class="go">Submodule</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/process&#39;</span><span class="g-Whitespace"> </span><span class="go">(git://gitorious.org/ryppl/process.git)</span><span class="g-Whitespace"> </span><span class="go">registered</span><span class="g-Whitespace"> </span><span class="go">for</span><span class="g-Whitespace"> </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/process&#39;</span><span class="g-Whitespace"></span>
<span class="go">Submodule</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/wave&#39;</span><span class="g-Whitespace"> </span><span class="go">(git://gitorious.org/ryppl/wave.git)</span><span class="g-Whitespace"> </span><span class="go">registered</span><span class="g-Whitespace"> </span><span class="go">for</span><span class="g-Whitespace"> </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/wave&#39;</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Notice that the <em>submodule status</em> has not changed:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span>submodule<span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="go">-6d205b973e41c226eba838ef125d5a14f508e173</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"></span>
<span class="go">-413d393f7aaea99c85d8db7bd93e06b99465e84c</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="go">-d0698203f19bf30518f58ce8058dca496dba8ecf</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"></span>
<span class="go">-f1e2aa9ad7743beaf11296e4f7d6f960814a86b7</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Now update the submodules:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span>submodule<span class="g-Whitespace"> </span>update<span class="g-Whitespace"></span>
<span class="go">Initialized</span><span class="g-Whitespace"> </span><span class="go">empty</span><span class="g-Whitespace"> </span><span class="go">Git</span><span class="g-Whitespace"> </span><span class="go">repository</span><span class="g-Whitespace"> </span><span class="go">in</span><span class="g-Whitespace"> </span><span class="go">/tmp/src/libs/chrono/.git/</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">65,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(56/56),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">65</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">16),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">0)</span><span class="g-Whitespace"></span>
<span class="go">Receiving</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(65/65),</span><span class="g-Whitespace"> </span><span class="go">79.53</span><span class="g-Whitespace"> </span><span class="go">KiB,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Resolving</span><span class="g-Whitespace"> </span><span class="go">deltas:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(16/16),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Submodule</span><span class="g-Whitespace"> </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/chrono&#39;:</span><span class="g-Whitespace"> </span><span class="go">checked</span><span class="g-Whitespace"> </span><span class="go">out</span><span class="g-Whitespace"> </span><span class="go">&#39;6d205b973e41c226eba838ef125d5a14f508e173&#39;</span><span class="g-Whitespace"></span>
<span class="go">Initialized</span><span class="g-Whitespace"> </span><span class="go">empty</span><span class="g-Whitespace"> </span><span class="go">Git</span><span class="g-Whitespace"> </span><span class="go">repository</span><span class="g-Whitespace"> </span><span class="go">in</span><span class="g-Whitespace"> </span><span class="go">/tmp/src/libs/fiber/.git/</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">103,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(100/100),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">103</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">34),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">0)</span><span class="g-Whitespace"></span>
<span class="go">Receiving</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(103/103),</span><span class="g-Whitespace"> </span><span class="go">61.92</span><span class="g-Whitespace"> </span><span class="go">KiB,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Resolving</span><span class="g-Whitespace"> </span><span class="go">deltas:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(34/34),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Submodule</span><span class="g-Whitespace"> </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/fiber&#39;:</span><span class="g-Whitespace"> </span><span class="go">checked</span><span class="g-Whitespace"> </span><span class="go">out</span><span class="g-Whitespace"> </span><span class="go">&#39;413d393f7aaea99c85d8db7bd93e06b99465e84c&#39;</span><span class="g-Whitespace"></span>
<span class="go">Initialized</span><span class="g-Whitespace"> </span><span class="go">empty</span><span class="g-Whitespace"> </span><span class="go">Git</span><span class="g-Whitespace"> </span><span class="go">repository</span><span class="g-Whitespace"> </span><span class="go">in</span><span class="g-Whitespace"> </span><span class="go">/tmp/src/libs/process/.git/</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">128,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Receiving</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(128/128),</span><span class="g-Whitespace"> </span><span class="go">100.10</span><span class="g-Whitespace"> </span><span class="go">KiB,</span><span class="g-Whitespace"> </span><span class="go">done.g</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace">  </span><span class="go">93%</span><span class="g-Whitespace"> </span><span class="go">(120/128)</span><span class="g-Whitespace"></span>
<span class="go">Resolving</span><span class="g-Whitespace"> </span><span class="go">deltas:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(40/40),</span><span class="g-Whitespace"> </span><span class="go">done.g</span><span class="g-Whitespace"> </span><span class="go">deltas:</span><span class="g-Whitespace">   </span><span class="go">0%</span><span class="g-Whitespace"> </span><span class="go">(0/40)</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(87/87),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">128</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">40),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">120</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">38)</span><span class="g-Whitespace"></span>
<span class="go">Submodule</span><span class="g-Whitespace"> </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/process&#39;:</span><span class="g-Whitespace"> </span><span class="go">checked</span><span class="g-Whitespace"> </span><span class="go">out</span><span class="g-Whitespace"> </span><span class="go">&#39;d0698203f19bf30518f58ce8058dca496dba8ecf&#39;</span><span class="g-Whitespace"></span>
<span class="go">Initialized</span><span class="g-Whitespace"> </span><span class="go">empty</span><span class="g-Whitespace"> </span><span class="go">Git</span><span class="g-Whitespace"> </span><span class="go">repository</span><span class="g-Whitespace"> </span><span class="go">in</span><span class="g-Whitespace"> </span><span class="go">/tmp/src/libs/wave/.git/</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">469,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(222/222),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">469</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">233),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">469</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">233)</span><span class="g-Whitespace"></span>
<span class="go">Receiving</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(469/469),</span><span class="g-Whitespace"> </span><span class="go">530.36</span><span class="g-Whitespace"> </span><span class="go">KiB</span><span class="g-Whitespace"> </span><span class="go">|</span><span class="g-Whitespace"> </span><span class="go">256</span><span class="g-Whitespace"> </span><span class="go">KiB/s,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Resolving</span><span class="g-Whitespace"> </span><span class="go">deltas:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(233/233),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Submodule</span><span class="g-Whitespace"> </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/wave&#39;:</span><span class="g-Whitespace"> </span><span class="go">checked</span><span class="g-Whitespace"> </span><span class="go">out</span><span class="g-Whitespace"> </span><span class="go">&#39;f1e2aa9ad7743beaf11296e4f7d6f960814a86b7&#39;</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>That&#8217;s a lot of output... all that has happened is that a git checkout
of each submodule has been done to its corresponding directory inside
the superproject, and that the checkout has been done at a specific
commit.</p>
<p>Now notice that the git submodule status has changed:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span>submodule<span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="go">6d205b973e41c226eba838ef125d5a14f508e173</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"> </span><span class="go">(heads/master)</span><span class="g-Whitespace"></span>
<span class="go">413d393f7aaea99c85d8db7bd93e06b99465e84c</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"> </span><span class="go">(heads/master)</span><span class="g-Whitespace"></span>
<span class="go">d0698203f19bf30518f58ce8058dca496dba8ecf</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"> </span><span class="go">(heads/master)</span><span class="g-Whitespace"></span>
<span class="go">f1e2aa9ad7743beaf11296e4f7d6f960814a86b7</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"> </span><span class="go">(heads/master)</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>The minus sign to the left of the hash has disappeared, and a branch
(in parenthesis) has appeared on the right.</p>
<p>Also, the submodule directories now contain code:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>ls libs/process
<span class="go">CMakeLists.txt</span><span class="g-Whitespace">  </span><span class="go">build/</span><span class="g-Whitespace">  </span><span class="go">example/</span><span class="g-Whitespace">  </span><span class="go">index.htm</span><span class="g-Whitespace">  </span><span class="go">test/</span><span class="g-Whitespace"></span>
<span class="go">README.txt</span><span class="g-Whitespace">      </span><span class="go">doc/</span><span class="g-Whitespace">    </span><span class="go">include/</span><span class="g-Whitespace">  </span><span class="go">source/</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Now you have a <strong>ryppl</strong> workspace nearly ready to build.</p>
</div>
<div class="section" id="run-cmake-and-generate-forwarding-headers">
<h3>Run cmake and generate forwarding headers<a class="headerlink" href="#run-cmake-and-generate-forwarding-headers" title="Permalink to this headline">¶</a></h3>
<p>Generate makefiles with <em>cmake</em> in the standard way.  I like to make a
subdirectory <tt class="docutils literal"><span class="pre">build/</span></tt> of my clone and run cmake in there, so that I
can always tell which build corresponds to which clone.  This
directory has already been added to <tt class="docutils literal"><span class="pre">.gitignore</span></tt>, so git won&#8217;t be
distracted by all those new buildfiles:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>mkdir build
<span class="k">% </span>cd build
<span class="k">% </span>cmake ..
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">The</span><span class="g-Whitespace"> </span><span class="go">C</span><span class="g-Whitespace"> </span><span class="go">compiler</span><span class="g-Whitespace"> </span><span class="go">identification</span><span class="g-Whitespace"> </span><span class="go">is</span><span class="g-Whitespace"> </span><span class="go">GNU</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">The</span><span class="g-Whitespace"> </span><span class="go">CXX</span><span class="g-Whitespace"> </span><span class="go">compiler</span><span class="g-Whitespace"> </span><span class="go">identification</span><span class="g-Whitespace"> </span><span class="go">is</span><span class="g-Whitespace"> </span><span class="go">GNU</span><span class="g-Whitespace"></span>

<span class="go">[</span><span class="g-Whitespace"> </span><span class="go">etc</span><span class="g-Whitespace"> </span><span class="go">]</span><span class="g-Whitespace"></span>

<span class="go">--</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">Reading</span><span class="g-Whitespace"> </span><span class="go">boost</span><span class="g-Whitespace"> </span><span class="go">project</span><span class="g-Whitespace"> </span><span class="go">directories</span><span class="g-Whitespace"> </span><span class="go">(per</span><span class="g-Whitespace"> </span><span class="go">BUILD_PROJECTS)</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">+</span><span class="g-Whitespace"> </span><span class="go">preprocessor</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">+</span><span class="g-Whitespace"> </span><span class="go">concept_check</span><span class="g-Whitespace"></span>

<span class="go">[</span><span class="g-Whitespace"> </span><span class="go">etc...</span><span class="g-Whitespace"> </span><span class="go">note</span><span class="g-Whitespace"> </span><span class="go">that</span><span class="g-Whitespace"> </span><span class="go">&#39;chrono&#39;,</span><span class="g-Whitespace"> </span><span class="go">&#39;process&#39;,</span><span class="g-Whitespace"> </span><span class="go">etc</span><span class="g-Whitespace"> </span><span class="go">appear</span><span class="g-Whitespace"> </span><span class="go">in</span><span class="g-Whitespace"> </span><span class="go">this</span><span class="g-Whitespace"> </span><span class="go">list</span><span class="g-Whitespace"> </span><span class="go">]</span><span class="g-Whitespace"></span>

<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">+</span><span class="g-Whitespace"> </span><span class="go">wave</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">BUILD_TESTS</span><span class="g-Whitespace"> </span><span class="go">is</span><span class="g-Whitespace"> </span><span class="go">NONE:</span><span class="g-Whitespace"> </span><span class="go">skipping</span><span class="g-Whitespace"> </span><span class="go">test</span><span class="g-Whitespace"> </span><span class="go">directories.</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">BUILD_TOOLS</span><span class="g-Whitespace"> </span><span class="go">is</span><span class="g-Whitespace"> </span><span class="go">NONE:</span><span class="g-Whitespace"> </span><span class="go">skipping</span><span class="g-Whitespace"> </span><span class="go">tools.</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">Configuring</span><span class="g-Whitespace"> </span><span class="go">done</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">Generating</span><span class="g-Whitespace"> </span><span class="go">done</span><span class="g-Whitespace"></span>
<span class="go">--</span><span class="g-Whitespace"> </span><span class="go">Build</span><span class="g-Whitespace"> </span><span class="go">files</span><span class="g-Whitespace"> </span><span class="go">have</span><span class="g-Whitespace"> </span><span class="go">been</span><span class="g-Whitespace"> </span><span class="go">written</span><span class="g-Whitespace"> </span><span class="go">to:</span><span class="g-Whitespace"> </span><span class="go">/tmp/src/build</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>The last step is to generate forwarding headers.  This techinque is
borrowed from the smart guys at Trolltech <tt class="docutils literal"><span class="pre">Qt</span></tt> toolkit.  Make the
target <strong>genheaders</strong>:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>make genheaders
<span class="go">Scanning</span><span class="g-Whitespace"> </span><span class="go">dependencies</span><span class="g-Whitespace"> </span><span class="go">of</span><span class="g-Whitespace"> </span><span class="go">target</span><span class="g-Whitespace"> </span><span class="go">genheaders</span><span class="g-Whitespace"></span>
<span class="go">Generating</span><span class="g-Whitespace"> </span><span class="go">central</span><span class="g-Whitespace"> </span><span class="go">header</span><span class="g-Whitespace"> </span><span class="go">directory</span><span class="g-Whitespace"></span>
<span class="go">Projects</span><span class="g-Whitespace"> </span><span class="go">located</span><span class="g-Whitespace"> </span><span class="go">under</span><span class="g-Whitespace">     </span><span class="go">:</span><span class="g-Whitespace">  </span><span class="go">/tmp/src/libs</span><span class="g-Whitespace"></span>
<span class="go">Fwding</span><span class="g-Whitespace"> </span><span class="go">headers</span><span class="g-Whitespace"> </span><span class="go">generated</span><span class="g-Whitespace"> </span><span class="go">in:</span><span class="g-Whitespace">  </span><span class="go">/tmp/src/include</span><span class="g-Whitespace"></span>

<span class="g-Whitespace">              </span><span class="go">serialization:</span><span class="g-Whitespace">  </span><span class="go">178</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">                  </span><span class="go">smart_ptr:</span><span class="g-Whitespace">  </span><span class="go">59</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">               </span><span class="go">accumulators:</span><span class="g-Whitespace">  </span><span class="go">81</span><span class="g-Whitespace"></span>

<span class="g-Whitespace">                   </span><span class="go">[etc</span><span class="g-Whitespace"> </span><span class="go">etc]</span><span class="g-Whitespace"></span>

<span class="g-Whitespace">                 </span><span class="go">scope_exit:</span><span class="g-Whitespace">  </span><span class="go">1</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">                        </span><span class="go">mpl:</span><span class="g-Whitespace">  </span><span class="go">1041</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">                     </span><span class="go">assign:</span><span class="g-Whitespace">  </span><span class="go">16</span><span class="g-Whitespace"></span>
<span class="go">Built</span><span class="g-Whitespace"> </span><span class="go">target</span><span class="g-Whitespace"> </span><span class="go">genheaders</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Now you&#8217;ll notice that a superproject directory <tt class="docutils literal"><span class="pre">include/boost</span></tt>
exists and is full of headers:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>ls ../include/boost
<span class="go">accumulators/</span><span class="g-Whitespace">                 </span><span class="go">multi_array/</span><span class="g-Whitespace"></span>
<span class="go">algorithm/</span><span class="g-Whitespace">                    </span><span class="go">multi_array.hpp</span><span class="g-Whitespace"></span>
<span class="go">aligned_storage.hpp</span><span class="g-Whitespace">           </span><span class="go">multi_index/</span><span class="g-Whitespace"></span>

<span class="go">[etc]</span><span class="g-Whitespace"></span>

<span class="go">memory_order.hpp</span><span class="g-Whitespace">              </span><span class="go">wave/</span><span class="g-Whitespace"></span>
<span class="go">mpi/</span><span class="g-Whitespace">                          </span><span class="go">wave.hpp</span><span class="g-Whitespace"></span>
<span class="go">mpi.hpp</span><span class="g-Whitespace">                       </span><span class="go">weak_ptr.hpp</span><span class="g-Whitespace"></span>
<span class="go">mpl/</span><span class="g-Whitespace">                          </span><span class="go">xpressive/</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>And that each file simply forwards to the project from whence it
came:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>cat ../include/boost/wave.hpp
<span class="go">#include</span><span class="g-Whitespace"> </span><span class="go">&quot;../../libs/wave/include/boost/wave.hpp&quot;</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Note also that the presence of generated files in <tt class="docutils literal"><span class="pre">build/</span></tt> and
<tt class="docutils literal"><span class="pre">include/</span></tt> don&#8217;t worry git:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="go">#</span><span class="g-Whitespace"> </span><span class="go">On</span><span class="g-Whitespace"> </span><span class="go">branch</span><span class="g-Whitespace"> </span><span class="go">master</span><span class="g-Whitespace"></span>
<span class="go">nothing</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">commit</span><span class="g-Whitespace"> </span><span class="go">(working</span><span class="g-Whitespace"> </span><span class="go">directory</span><span class="g-Whitespace"> </span><span class="go">clean)</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Thanks to the file <tt class="docutils literal"><span class="pre">.gitignore</span></tt>.</p>
</div>
<div class="section" id="build">
<h3>Build<a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h3>
<p>Now you can build:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>make boost_fiber
<span class="go">Scanning</span><span class="g-Whitespace"> </span><span class="go">dependencies</span><span class="g-Whitespace"> </span><span class="go">of</span><span class="g-Whitespace"> </span><span class="go">target</span><span class="g-Whitespace"> </span><span class="go">boost_fiber-mt-static-debug</span><span class="g-Whitespace"></span>
<span class="go">[</span><span class="g-Whitespace">  </span><span class="go">0%]</span><span class="g-Whitespace"> </span><span class="go">Building</span><span class="g-Whitespace"> </span><span class="go">CXX</span><span class="g-Whitespace"> </span><span class="go">object</span><span class="g-Whitespace"> </span><span class="go">libs/fiber/src/CMakeFiles/boost_fiber-mt-static-debug.dir/auto_reset_event.cpp.o</span><span class="g-Whitespace"></span>
<span class="go">[</span><span class="g-Whitespace">  </span><span class="go">0%]</span><span class="g-Whitespace"> </span><span class="go">Building</span><span class="g-Whitespace"> </span><span class="go">CXX</span><span class="g-Whitespace"> </span><span class="go">object</span><span class="g-Whitespace"> </span><span class="go">libs/fiber/src/CMakeFiles/boost_fiber-mt-static-debug.dir/condition.cpp.o</span><span class="g-Whitespace"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="development-scenarios">
<h2>Development scenarios<a class="headerlink" href="#development-scenarios" title="Permalink to this headline">¶</a></h2>
<p>Now we&#8217;ll walk through several development scenarios and have a look
at the workflow.</p>
<div class="section" id="modularize-an-existing-boost-project">
<h3>&#8220;Modularize&#8221; an existing boost project<a class="headerlink" href="#modularize-an-existing-boost-project" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s &#8220;modularize&#8221; boost.python.  I check out <tt class="docutils literal"><span class="pre">ryppl</span></tt>, which
currently hosts boost.python directly, not as a submodule (though by
the time you read this, python will be a submodule, so try out this
modularization on something else).</p>
<p>I&#8217;m in my fresh clone (without having done any <tt class="docutils literal"><span class="pre">git</span> <span class="pre">submodule</span> <span class="pre">init</span></tt>
or any of that..  you may, but it isn&#8217;t necessary.)</p>
<p>I cd into the python subdirectory and import its contents into a local
git repository:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>cd libs/python

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">init</span>
<span class="go">Initialized</span><span class="g-Whitespace"> </span><span class="go">empty</span><span class="g-Whitespace"> </span><span class="go">Git</span><span class="g-Whitespace"> </span><span class="go">repository</span><span class="g-Whitespace"> </span><span class="go">in</span><span class="g-Whitespace"> </span><span class="go">/tmp/src/libs/python/.git/</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">add </span>.<span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">commit </span><span class="o">-m </span>&quot;modularizing<span class="g-Whitespace"> </span>python&quot;<span class="g-Whitespace"></span>
<span class="go">[master</span><span class="g-Whitespace"> </span><span class="go">(root-commit)</span><span class="g-Whitespace"> </span><span class="go">c16bad0]</span><span class="g-Whitespace"> </span><span class="go">modularizing</span><span class="g-Whitespace"> </span><span class="go">python</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">680</span><span class="g-Whitespace"> </span><span class="go">files</span><span class="g-Whitespace"> </span><span class="go">changed,</span><span class="g-Whitespace"> </span><span class="go">79509</span><span class="g-Whitespace"> </span><span class="go">insertions(+),</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">deletions(-)</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">CMakeLists.txt</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">build/Jamfile.v2</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">doc/Jamfile</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">[etc]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">todo.txt</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>You&#8217;ll notice I&#8217;ve created a new git repository inside a git
repository... this kind of thing would confuse svn, but here it
doesn&#8217;t matter; unlike subversion, git information exists only at the
root of each clone (in subversion <tt class="docutils literal"><span class="pre">.svn</span></tt> directories are sprinkled
through the entire checkout).</p>
<p>Meanwhile I&#8217;ve created a repository to hold this project up on
gitorious.  I now push the code there:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">push </span><span class="s">git@gitorious.org:ryppl/python.git</span><span class="g-Whitespace"></span>
<span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">714,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Delta</span><span class="g-Whitespace"> </span><span class="go">compression</span><span class="g-Whitespace"> </span><span class="go">using</span><span class="g-Whitespace"> </span><span class="go">up</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">8</span><span class="g-Whitespace"> </span><span class="go">threads.</span><span class="g-Whitespace"></span>
<span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(708/708),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Writing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(714/714),</span><span class="g-Whitespace"> </span><span class="go">825.03</span><span class="g-Whitespace"> </span><span class="go">KiB,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">714</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">127),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">0)</span><span class="g-Whitespace"></span>
<span class="go">=&gt;</span><span class="g-Whitespace"> </span><span class="go">Syncing</span><span class="g-Whitespace"> </span><span class="go">Gitorious...</span><span class="g-Whitespace"> </span><span class="go">[OK]</span><span class="g-Whitespace"></span>
<span class="go">To</span><span class="g-Whitespace"> </span><span class="go">git@gitorious.org:ryppl/python.git</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">+</span><span class="g-Whitespace"> </span><span class="go">1b112bc...c16bad0</span><span class="g-Whitespace"> </span><span class="go">HEAD</span><span class="g-Whitespace"> </span><span class="go">-&gt;</span><span class="g-Whitespace"> </span><span class="go">master</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>I&#8217;ve used the <em>push</em> url, since I have write access.</p>
<p>Now that I have python&#8217;s code safely pushed to a separate
publicly-visible repository, I can remove the python code from the
superproject:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% </span>cd ..               # to directory libs/

<span class="k">% </span>rm -r python        # remove the files

<span class="k">% git</span><span class="g-Whitespace"> </span>rm<span class="g-Whitespace"> </span><span class="o">-r </span>python<span class="g-Whitespace">    </span>#<span class="g-Whitespace"> </span>stage<span class="g-Whitespace"> </span>the<span class="g-Whitespace"> </span><span class="s">&#39;rm&#39;</span><span class="g-Whitespace"> </span>for<span class="g-Whitespace"> </span><span class="gd">commit</span>
<span class="go">rm</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/python/CMakeLists.txt&#39;</span><span class="g-Whitespace"></span>
<span class="go">rm</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/python/build/Jamfile.v2&#39;</span><span class="g-Whitespace"></span>
<span class="go">rm</span><span class="g-Whitespace"> </span><span class="go">&#39;libs/python/doc/Jamfile&#39;</span><span class="g-Whitespace"></span>
<span class="go">...</span><span class="g-Whitespace"></span>

<span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">commit </span><span class="o">-m </span>&quot;bye<span class="g-Whitespace"> </span>bye<span class="g-Whitespace"> </span>python&quot;<span class="g-Whitespace"></span>
<span class="go">[master</span><span class="g-Whitespace"> </span><span class="go">2efae00]</span><span class="g-Whitespace"> </span><span class="go">bye</span><span class="g-Whitespace"> </span><span class="go">bye</span><span class="g-Whitespace"> </span><span class="go">python</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">680</span><span class="g-Whitespace"> </span><span class="go">files</span><span class="g-Whitespace"> </span><span class="go">changed,</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">insertions(+),</span><span class="g-Whitespace"> </span><span class="go">79509</span><span class="g-Whitespace"> </span><span class="go">deletions(-)</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">delete</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">libs/python/CMakeLists.txt</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">...</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">delete</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"> </span><span class="go">libs/python/todo.txt</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>For sanity let&#8217;s verify that the working copy is clean:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="go">#</span><span class="g-Whitespace"> </span><span class="go">On</span><span class="g-Whitespace"> </span><span class="go">branch</span><span class="g-Whitespace"> </span><span class="go">master</span><span class="g-Whitespace"></span>
<span class="go">nothing</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">commit</span><span class="g-Whitespace"> </span><span class="go">(working</span><span class="g-Whitespace"> </span><span class="go">directory</span><span class="g-Whitespace"> </span><span class="go">clean)</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Now add the git submodule to the superproject:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span>submodule<span class="g-Whitespace"> </span><span class="gd">add </span><span class="s">git://gitorious.org/ryppl/python.git</span><span class="g-Whitespace"> </span>libs/python<span class="g-Whitespace"></span>
<span class="go">Initialized</span><span class="g-Whitespace"> </span><span class="go">empty</span><span class="g-Whitespace"> </span><span class="go">Git</span><span class="g-Whitespace"> </span><span class="go">repository</span><span class="g-Whitespace"> </span><span class="go">in</span><span class="g-Whitespace"> </span><span class="go">/tmp/src/libs/python/.git/</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Counting</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">714,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Compressing</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(581/581),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">remote:</span><span class="g-Whitespace"> </span><span class="go">Total</span><span class="g-Whitespace"> </span><span class="go">714</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">127),</span><span class="g-Whitespace"> </span><span class="go">reused</span><span class="g-Whitespace"> </span><span class="go">714</span><span class="g-Whitespace"> </span><span class="go">(delta</span><span class="g-Whitespace"> </span><span class="go">127)</span><span class="g-Whitespace"></span>
<span class="go">Receiving</span><span class="g-Whitespace"> </span><span class="go">objects:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(714/714),</span><span class="g-Whitespace"> </span><span class="go">825.03</span><span class="g-Whitespace"> </span><span class="go">KiB</span><span class="g-Whitespace"> </span><span class="go">|</span><span class="g-Whitespace"> </span><span class="go">674</span><span class="g-Whitespace"> </span><span class="go">KiB/s,</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
<span class="go">Resolving</span><span class="g-Whitespace"> </span><span class="go">deltas:</span><span class="g-Whitespace"> </span><span class="go">100%</span><span class="g-Whitespace"> </span><span class="go">(127/127),</span><span class="g-Whitespace"> </span><span class="go">done.</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Notice I have used the <tt class="docutils literal"><span class="pre">git://</span></tt> url, not the <tt class="docutils literal"><span class="pre">git&#64;</span></tt> url.
The <tt class="docutils literal"><span class="pre">git://</span></tt> url is readonly and is the only type of URL
that should be committed to the superproject.  The <tt class="docutils literal"><span class="pre">git&#64;</span></tt>
urls are readwrite and authenticated via SSH.  I will soon
use the latter to push commits from submodules, but I never
commit them to superprojects.</p>
</div>
<p>Git has checked out the submodule for us.  If I check the status of
the superproject, I&#8217;ll see:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="go">#</span><span class="g-Whitespace"> </span><span class="go">On</span><span class="g-Whitespace"> </span><span class="go">branch</span><span class="g-Whitespace"> </span><span class="go">master</span><span class="g-Whitespace"></span>
<span class="go">#</span><span class="g-Whitespace"> </span><span class="go">Your</span><span class="g-Whitespace"> </span><span class="go">branch</span><span class="g-Whitespace"> </span><span class="go">is</span><span class="g-Whitespace"> </span><span class="go">ahead</span><span class="g-Whitespace"> </span><span class="go">of</span><span class="g-Whitespace"> </span><span class="go">&#39;origin/master&#39;</span><span class="g-Whitespace"> </span><span class="go">by</span><span class="g-Whitespace"> </span><span class="go">1</span><span class="g-Whitespace"> </span><span class="go">commit.</span><span class="g-Whitespace"></span>
<span class="go">#</span><span class="g-Whitespace"></span>
<span class="go">#</span><span class="g-Whitespace"> </span><span class="go">Changes</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">be</span><span class="g-Whitespace"> </span><span class="go">committed:</span><span class="g-Whitespace"></span>
<span class="go">#</span><span class="g-Whitespace">   </span><span class="go">(use</span><span class="g-Whitespace"> </span><span class="go">&quot;git</span><span class="g-Whitespace"> </span><span class="go">reset</span><span class="g-Whitespace"> </span><span class="go">HEAD</span><span class="g-Whitespace"> </span><span class="go">&lt;file&gt;...&quot;</span><span class="g-Whitespace"> </span><span class="go">to</span><span class="g-Whitespace"> </span><span class="go">unstage)</span><span class="g-Whitespace"></span>
<span class="go">#</span><span class="g-Whitespace"></span>
<span class="go">#</span><span class="g-Whitespace">       </span><span class="go">modified:</span><span class="g-Whitespace">   </span><span class="go">.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">#</span><span class="g-Whitespace">       </span><span class="go">new</span><span class="g-Whitespace"> </span><span class="go">file:</span><span class="g-Whitespace">   </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="go">#</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>And &#8216;git diff &#8211;cached&#8217; shows me:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">diff </span>--cached<span class="g-Whitespace"></span>
<span class="go">diff</span><span class="g-Whitespace"> </span><span class="go">--git</span><span class="g-Whitespace"> </span><span class="go">a/.gitmodules</span><span class="g-Whitespace"> </span><span class="go">b/.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">index</span><span class="g-Whitespace"> </span><span class="go">a74cbf4..f6067c4</span><span class="g-Whitespace"> </span><span class="go">100644</span><span class="g-Whitespace"></span>
<span class="go">---</span><span class="g-Whitespace"> </span><span class="go">a/.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">+++</span><span class="g-Whitespace"> </span><span class="go">b/.gitmodules</span><span class="g-Whitespace"></span>
<span class="go">@@</span><span class="g-Whitespace"> </span><span class="go">-10,3</span><span class="g-Whitespace"> </span><span class="go">+10,6</span><span class="g-Whitespace"> </span><span class="go">@@</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">[submodule</span><span class="g-Whitespace"> </span><span class="go">&quot;libs/fiber&quot;]</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="g-Whitespace">        </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">git://gitorious.org/ripple/fiber.git</span><span class="g-Whitespace"></span>
<span class="go">+[submodule</span><span class="g-Whitespace"> </span><span class="go">&quot;libs/python&quot;]</span><span class="g-Whitespace"></span>
<span class="go">+</span><span class="g-Whitespace">       </span><span class="go">path</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="go">+</span><span class="g-Whitespace">       </span><span class="go">url</span><span class="g-Whitespace"> </span><span class="go">=</span><span class="g-Whitespace"> </span><span class="go">git://gitorious.org/ryppl/python.git</span><span class="g-Whitespace"></span>
<span class="go">diff</span><span class="g-Whitespace"> </span><span class="go">--git</span><span class="g-Whitespace"> </span><span class="go">a/libs/python</span><span class="g-Whitespace"> </span><span class="go">b/libs/python</span><span class="g-Whitespace"></span>
<span class="go">new</span><span class="g-Whitespace"> </span><span class="go">file</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">160000</span><span class="g-Whitespace">    </span><span class="go">&lt;-----------------</span><span class="g-Whitespace"> </span><span class="go">note</span><span class="g-Whitespace"> </span><span class="go">funny-looking</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"></span>
<span class="go">index</span><span class="g-Whitespace"> </span><span class="go">0000000..c16bad0</span><span class="g-Whitespace"></span>
<span class="go">---</span><span class="g-Whitespace"> </span><span class="go">/dev/null</span><span class="g-Whitespace"></span>
<span class="go">+++</span><span class="g-Whitespace"> </span><span class="go">b/libs/python</span><span class="g-Whitespace"></span>
<span class="go">@@</span><span class="g-Whitespace"> </span><span class="go">-0,0</span><span class="g-Whitespace"> </span><span class="go">+1</span><span class="g-Whitespace"> </span><span class="go">@@</span><span class="g-Whitespace"></span>
<span class="go">+Subproject</span><span class="g-Whitespace"> </span><span class="go">commit</span><span class="g-Whitespace"> </span><span class="go">c16bad0e3f847375872e53bac319d2f724fbf569</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>Here we see a few lines added to .gitmodules as well as <em>new file
mode 160000</em>...  this is a special file (not a real file that you can
see in the checkout) that records the commit at which the submodule
should be checked out.  This is the same special file that we see in
the line <em>new file: libs/python</em> of <tt class="docutils literal"><span class="pre">git</span> <span class="pre">status</span></tt>.  The hash is the
same one that we see in the current output of <tt class="docutils literal"><span class="pre">git</span> <span class="pre">submodule</span> <span class="pre">status</span></tt>:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span>submodule<span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="go">-6d205b973e41c226eba838ef125d5a14f508e173</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"></span>
<span class="go">-413d393f7aaea99c85d8db7bd93e06b99465e84c</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="go">-d0698203f19bf30518f58ce8058dca496dba8ecf</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"></span>
<span class="go">-c16bad0e3f847375872e53bac319d2f724fbf569</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="go">-f1e2aa9ad7743beaf11296e4f7d6f960814a86b7</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>To finish up let&#8217;s commit:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span><span class="gd">commit </span><span class="o">-m </span>&quot;modularized<span class="g-Whitespace"> </span>python&quot;<span class="g-Whitespace"></span>
<span class="go">[master</span><span class="g-Whitespace"> </span><span class="go">525e3b0]</span><span class="g-Whitespace"> </span><span class="go">modularized</span><span class="g-Whitespace"> </span><span class="go">python</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">2</span><span class="g-Whitespace"> </span><span class="go">files</span><span class="g-Whitespace"> </span><span class="go">changed,</span><span class="g-Whitespace"> </span><span class="go">4</span><span class="g-Whitespace"> </span><span class="go">insertions(+),</span><span class="g-Whitespace"> </span><span class="go">0</span><span class="g-Whitespace"> </span><span class="go">deletions(-)</span><span class="g-Whitespace"></span>
<span class="g-Whitespace"> </span><span class="go">create</span><span class="g-Whitespace"> </span><span class="go">mode</span><span class="g-Whitespace"> </span><span class="go">160000</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>To recap, to modularize project <strong>P</strong> I have:</p>
<ul class="simple">
<li>Created a publicly-visible repository <strong>PR</strong> to hold the project I&#8217;m
modularizing</li>
<li>Imported <strong>P</strong> into a single git repo and pushed the results to
<strong>PR</strong>.</li>
<li>Deleted all trace of <strong>P</strong> from the superproject and committed
the deletion.</li>
<li>Added <strong>PR</strong> as a submodule to the superproject with directory
<tt class="docutils literal"><span class="pre">libs/**P**</span></tt>.</li>
<li>Committed the addition to the superproject and pushed the results.</li>
</ul>
<p>Now, looking at my submodule status:</p>
<div class="highlight-git_shell"><div class="highlight"><pre><span class="k">% git</span><span class="g-Whitespace"> </span>submodule<span class="g-Whitespace"> </span><span class="gd">status</span>
<span class="go">-6d205b973e41c226eba838ef125d5a14f508e173</span><span class="g-Whitespace"> </span><span class="go">libs/chrono</span><span class="g-Whitespace"></span>
<span class="go">-413d393f7aaea99c85d8db7bd93e06b99465e84c</span><span class="g-Whitespace"> </span><span class="go">libs/fiber</span><span class="g-Whitespace"></span>
<span class="go">-d0698203f19bf30518f58ce8058dca496dba8ecf</span><span class="g-Whitespace"> </span><span class="go">libs/process</span><span class="g-Whitespace"></span>
<span class="go">-c16bad0e3f847375872e53bac319d2f724fbf569</span><span class="g-Whitespace"> </span><span class="go">libs/python</span><span class="g-Whitespace"></span>
<span class="go">-f1e2aa9ad7743beaf11296e4f7d6f960814a86b7</span><span class="g-Whitespace"> </span><span class="go">libs/wave</span><span class="g-Whitespace"></span>
</pre></div>
</div>
<p>I see the same thing as I did on initial checkout, with the addition
of one extra submodule (in this case python).  I get the workspace
ready for build with the same steps in first part of
<a class="reference internal" href="#getting-started"><em>Getting started</em></a>:</p>
<ul class="simple">
<li>git submodule init</li>
<li>git submodule update</li>
<li>run cmake</li>
<li>make genheaders</li>
<li>???</li>
<li>profit</li>
</ul>
<p>Say I have a lot of modifications to <tt class="docutils literal"><span class="pre">boost.python</span></tt> that I&#8217;ve been
working on.  Some of my clients are using my modifications, but
they&#8217;re not yet in upstream boost, if they&#8217;ll ever be. I need to
make in-house releases of boost-plus-my-new-python-features and at the
same time have my code and docs maximally avaiable to the boost
community, if I ever hope to have the changes adopted upstream, which
would both make a contribution to boost and simplify my job.</p>
<p>I&#8217;m going to need two public repositories: one for my python
modifications, and one for my (slight) modifications to the
superproject.  The first is absolutely necessary, the second, less so.</p>
<div class="section" id="create-a-repository-for-the-python-project">
<h4>Create a repository for the python project<a class="headerlink" href="#create-a-repository-for-the-python-project" title="Permalink to this headline">¶</a></h4>
<p>I&#8217;ve created this on gitorious alongside the others, but this isn&#8217;t
required, it could be anywhere on the net.</p>
<ul class="simple">
<li>Make a clone of <strong>mainline</strong> up on gitorious</li>
<li>Clone this clone downstream</li>
<li>Create an</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="good-links">
<h1>Good Links<a class="headerlink" href="#good-links" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-submodule.html">http://www.kernel.org/pub/software/scm/git/docs/git-submodule.html</a></li>
<li><a class="reference external" href="http://woss.name/blog/2008/4/9/using-git-submodules-to-track-plugins.html">http://woss.name/blog/2008/4/9/using-git-submodules-to-track-plugins.html</a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="about_the_mirror.html" title="How this was all set up"
             >next</a> |</li>
        <li class="right" >
          <a href="various_howtos.html" title="Various HOWTOS"
             >previous</a> |</li>
    <li><a href="http://www.boost.org/">Boost</a> &raquo;</li>
    
        <li><a href="index.html">Gitting boost</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, troy d. straszheim --  Version f13725bd970f99e7d5eff2da02fb76c1d28a123c, Sun, 15 Nov 2009.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>